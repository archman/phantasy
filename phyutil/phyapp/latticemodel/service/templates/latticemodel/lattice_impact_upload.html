{% extends "latticemodel/layout.html" %}

{% block title %}Upload :: Lattice{% endblock %}

{%- block content %}
<div class="container">
<form data-file-upload="options" method="post" enctype="multipart/form-data">
	<div>
		<h3>Upload Lattice</h3>
	</div>
	<div>
		<div class="form-horizontal">
			<div class="form-group {% if errors.lattice_type %}has-error{% endif %}">
				<div class="col-md-2">
					<label class="control-label">Lattice Type</label>
					{%- for lt in lattice_types if lt.type == lattice.lattice_type %}
					<p class="form-control-static">{{ lt.name }}</p>
					{%- endfor %}
				</div>
			</div>
			<div class="form-group {% if errors.particle_type %}has-error{% endif %}">
				<div class="col-md-2">
					<label class="control-label">Particle Type</label>
					<select class="form-control" name="particle_type">
						<option></option>
						{%- for p in particle_types %}
						<option value="{{p.type}}" {% if p.type == lattice.particle_type %}selected{% endif %}>{{p.name}}</option>
						{%- endfor %}
					</select>
					{% if errors.particle_type %}<span class="text-danger">{{errors.particle_type}}</span>{% endif %}
				</div>
			</div>
			<div class="form-group {% if errors.name %}has-error{% endif %}">
				<div class="col-md-6">
				<label class="control-label" for="lattice_name">Name</label>
				<div>
					<input class="form-control" id="lattice_name" name="name"
							type="text" autocomplete="off" value="{{lattice.name}}"/>
				</div>
				{% if errors.name %}<span class="text-danger">{{errors.name}}</span>{% endif %}
				</div>
			</div>
			<!--<div class="control-group">
				<label class="control-label" for="inputVersion">Version</label>
				<div class="controls">
					<input id="inputVersion" ng-model="upload.version" name="version" type="text">
				</div>
			</div>-->
			<!-- <div class="control-group">
				<label class="control-label" for="inputBranch">Branch</label>
				<div class="controls">
					<input id="inputBranch" ng-model="upload.branch" name="branch" type="text">
				</div>
			</div> -->
			<div class="form-group">
				<div class="col-md-6">
				<label class="control-label">Description</label>
				<textarea class="form-control" name="description" rows="3">{{lattice.description|escape}}</textarea>
				</div>
			</div>
			<div class="form-group">
				<div class="col-md-6">
					<input class="form-control" name="status_type" type="hidden" value="development"/>
				</div>
			</div>
			<!-- <div class="control-group">
				<div class="controls">
					<label class="checkbox">
						<input ng-disabled="!modal.doSimulation.show" name="dosimulation" ng-model="modal.doSimulation.selected" type="checkbox"> Do simulation after successful upload
					</label>
				</div>
			</div> -->
			<div class="form-group {% if errors.lattice_file %}has-error{% endif %}">
				<div class="col-md-4">
					<label class="control-label">Lattice File (i.e test.in)</label>
					<input class="btn btn-default" type="file" name="lattice_file"/>
					{% if errors.lattice_file %}<span class="text-danger">{{errors.lattice_file}}</span>{% endif %}
				</div>
			</div>
			<div class="form-group">
				<div class="col-md-4">
					<label>Attachments</label>
					<input class="btn btn-default" type="file" name="attachments" multiple>
				</div>
			</div>
			
			{%- if errors._global %}
			<div class="row">
				<div class="col-md-6">
					<div class="alert alert-danger" role="alert">{{errors._global}}</div>
				</div>
			</div>
			{%- endif %}
			
			<div class="form-group">
				<div class="col-md-6">
					<button class="btn btn-primary pull-right" type="submit">Upload</button>
				</div>
			</div>
		</div>
	</div>
</form>
</div>
{%- endblock %}

{%- block scripts %}
<script type="text/javascript" src="{{static_url('vendor/typeahead.js/js/typeahead.jquery.min.js')}}"></script>
<script type="text/javascript" src="{{static_url('latticemodel/js/lattice_impact_upload.js')}}"></script>
{%- endblock %}
